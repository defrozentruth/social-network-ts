import repositoryPool from"../repository/repository-pool.js";export default e=>{e.get("/",(e,s)=>{s.render("startPage")}),e.get("/user",async(e,s)=>{try{var r,t=await fetch("http://localhost:8080/api/user",{method:"GET"});t.ok?(r=await t.json(),s.render("usersPage",{users:r})):(console.error("Произошла ошибка при получении данных:",t.status),s.status(500).send("Произошла ошибка при получении данных"))}catch(e){console.error("Произошла ошибка:",e.message),s.status(500).send("Произошла ошибка")}}),e.get("/friends/:id(\\d+)",async(s,r)=>{s=parseInt(s.params.id);try{var t={};let e=await fetch("http://localhost:8080/api/user/"+s,{method:"GET"});e.ok?(t.currentUser=await e.json(),(e=await fetch("http://localhost:8080/api/friend/"+s,{method:"GET"})).ok?(t.users=await e.json(),r.render("usersFriends",{users:t.users,user:t.currentUser})):(console.error("Произошла ошибка при получении данных:",e.status),r.status(500).send("Произошла ошибка при получении данных"))):(console.error("Произошла ошибка при получении данных:",e.status),r.status(500).send("Произошла ошибка при получении данных"))}catch(e){console.error("Произошла ошибка:",e.message),r.status(500).send("Произошла ошибка")}}),e.get("/message/:id(\\d+)",async(e,s)=>{e=parseInt(e.params.id);try{var r={},t=await fetch("http://localhost:8080/api/user/"+e,{method:"GET"});t.ok&&(r.currentUser=await t.json()),s.render("usersChats",{usersChats:await repositoryPool.messageRepo.getUserChats(e),user:r.currentUser})}catch(e){console.error("Произошла ошибка:",e.message),s.status(500).send("Произошла ошибка")}}),e.get("/news/:id(\\d+)",async(e,s)=>{e=parseInt(e.params.id);try{var r={},t=await fetch("http://localhost:8080/api/user/"+e,{method:"GET"});t.ok&&(r.currentUser=await t.json()),s.render("usersNews",{usersNews:await repositoryPool.newsRepo.getNews(r.currentUser.friends),user:r.currentUser})}catch(e){console.error("Произошла ошибка:",e.message),s.status(500).send("Произошла ошибка")}}),e.get("/user/edit/:id(\\d+)",async(e,s)=>{e=parseInt(e.params.id);try{var r={},t=await fetch("http://localhost:8080/api/user/"+e,{method:"GET"});t.ok&&(r.currentUser=await t.json()),s.render("editUser",{user:r.currentUser})}catch(e){console.error("Произошла ошибка:",e.message),s.status(500).send("Произошла ошибка")}})};
//# sourceMappingURL=frontend.js.map
